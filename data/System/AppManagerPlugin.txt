%META:TOPICINFO{author="BaseUserMapping_333" comment="pending" date="1445591316" format="1.1" version="3"}%
%META:TOPICPARENT{name="Plugins"}%

%TOC%
---++ Documentation
To get your Conrtib recognised by the AppManager, create a file named _appconfig.json_ in your extension directory (i.e. _lib/Foswiki/Contrib/MyAppContrib/appconfig.json_).
In the appconfig.json you can place all your default configurations, you need to install your Conrtib.

---+++ _appconfig.json_

   * _appname_: The application name.
   * _description_: The application description. You may enter <nop>%SHORTDESCRIPTION%</nop> here, it will be replaced by the AppManagerPlugin.
   * _installConfigs_: Set of install configs.
      * _name_: Displayname which describes the config set.
      * _destinationWeb_: Name of the detination web.
      * _webHomeConfig_: This object creates an WebHome Topic.
         * _viewTemplate_: Is the given View Tempalte.
         * _topicTitle_: Is the TopicTitle of the WebHome Topic.
      * _webActionsConfig_: Creates a WebActionsTopic and includes the given source Topic.

<pre>
 {
     "appname": "MyAppContrib",
     "description": "%<nop>SHORTDESCRIPTION%",
     "installConfigs": [
         {
             "name": "My installation name",
             "destinationWeb": "MyApp",
             "webHomeConfig": {
                 "viewTemplate": "MyAppWebHomeView",
                 "topicTitle": "My App"
             },
             "webActionsConfig": {
                 "sourceTopic": "MyAppDefaultWebActions"
             },
             "installActions": [
                 {
                     "action": "createForm",
                     "formName": "MyAppForm",
                     "formGroup": "MyApp"
                 },
                 {
                     "action": "createForm",
                     "formName": "MyAppTaskForm",
                     "formGroup": "MyAppTask"
                 }
             ]
         }
     ]
}
</pre>

---+++ REST handlers

All REST handlers are only accessible by the AdminUser.
<table class="Modac_Standard">
	<thead>
		<tr>
			<th>Handler</th>
			<th>Example success message</th>
			<th>Example failure message</th>
		</tr>
	</thead>
	<tr>
		<td>
			<pre>/bin/rest/AppManagerPlugin/applist</pre>
		</td>
		<td>
			<pre>{"InvestmentAppContrib": "managed", "RiskAppContrib": "unmanaged"}</pre>
		</td>
		<td>
			<pre>{"error" :"access to REST handler not allowed"}</pre>
		</td>
	</tr>
	<tr>
		<td>
			<pre>/bin/rest/AppManagerPlugin/appdetail?name=InvestmentAppContrib</pre>
		</td>
		<td>
<pre>{
  "description": "Whatever",
  "status": "Ist sauber installiert",
  "actions:" {
    "install": {
      "description": "freitext",
      "parameters": {"param1": {"type" "text", "default"="foo"}
  }
}</pre>
		</td>
		<td>
			<pre>{"error" :"access to REST handler not allowed"}</pre>
		</td>
	</tr>
	<tr>
		<td>
			<pre>/bin/rest/AppManagerPlugin/appaction?name=InvestmentAppContrib&action=install</pre>
			Tries to install a single application
		</td>
<td colspan="2">
	See _Response: result_ section.
</td>
</tr>
	<td>
		<pre>/bin/rest/AppManagerPlugin/installall</pre>
		Tries to install all applications.
	</td>
<td colspan="2">
	See _Response: result_ section.
</td>
</tr>
</table>

---+++ Response: result

<pre>{
    "result": $result,
    "type" : $type,
    "data" : $data
}</pre>
   * ==$result==: ="ok"|"error"|"unknown"=
   * ==$type==: ="text"|"html"=
   * ==$data==: Depending on =$type=.
      * ="text"=: Text meant to be displayed raw.
      * ="html"=: Text meant to inserted into page.

---++ Installation

---++ Plugin Info

|  Authors: | Modell Aachen GmbH |
|  Copyright: | &copy; 2015, Modell Aachen GmbH |
|  License: | GPL ([[http://www.gnu.org/copyleft/gpl.html][GNU General Public License]]) |
|  Release: | %$RELEASE% |
|  Version: | %$VERSION% |
|  Change&nbsp;History: | <!-- versions below in reverse order -->&nbsp; |
|  0.1 | First functional prototype. |
|  Home: | http://modell-aachen.de |
